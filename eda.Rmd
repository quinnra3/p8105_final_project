---
title: "Data Summaries"
output: html_document
---

```{r setup, include=FALSE}
library(tidyverse)

knitr::opts_chunk$set(
	echo = TRUE,
	warning = FALSE,
	message = FALSE,
	fig.width = 8, 
  fig.height = 6,
  out.width = "90%"
)

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d

theme_set(theme_minimal() + theme(legend.position = "bottom"))
```

## NYC Rodent Inspection Data Summary

The NYC Rodent Inspection data is sourced from [NYC Open Data](https://data.cityofnewyork.us/Health/Rodent-Inspection/p937-wjvj). Data is reported from the NYC Department of Health and Mental Hygiene (DOHMH), Division of Environmental Health Pest Control Database. The dataset was last updated December 8, 2023 and is updated daily. The data provides information on rodent inspections throughout the NYC boroughs.

Please note that if a property/taxplot is not present, that does not indicate an absence of rats, rather just that the locatinon has not been inspected. Additionally, neighborhoods with higher number of properties with active rat signs may not actually have had higher rat populations but simply more inspections.

```{r}
rodent_inspec_df <- read_csv("data/Rodent Inspection Data - 2023.csv")

rodent_inspec_df = 
  rodent_inspec_df |> 
  janitor::clean_names() |> select(-job_id, -job_ticket_or_work_order_id, -job_progress, -bbl, -house_number, -street_name, -block, -lot, -approved_date, -location, -community_board, -council_district, -census_tract, -bin, -nta)

skimr::skim_without_charts(rodent_inspec_df)
```

## Department of Sanitation Monthly Tonnage Data Summary

The DSNY Monthly Tonnage Data data is sourced from [NYC Open Data](https://data.cityofnewyork.us/City-Government/DSNY-Monthly-Tonnage-Data/ebb7-mvp5). Data is reported from the NYC Department of Sanitation that collects from NYC residences and institutions. The dataset was last updated November 8, 2023, and is updated monthly.

```{r}
dsny_df <- read_csv("data/DSNY_Monthly_Tonnage_Data_20231108.csv")

dsny_df = 
  dsny_df |> 
  janitor::clean_names() |> 
  separate(month, c("year", "month"), sep = " / ") |> filter(year == "2023") |> 
  select(-communitydistrict, -resorganicstons, -schoolorganictons, -leavesorganictons, -xmastreetons)

skimr::skim_without_charts(dsny_df)
```

## Transit Rat App Data

The Transit rat app data is sourced from the [Transit App NYC Subway Rat Detector](https://transitapp.com/rats). This dataset contains self-reported data from the MTA's 1.2 million subway riders who are ratting out their furry friends. The dataset is upated daily, last updated December 8, 2023.

```{r}
app_data <- read_csv("data/Transit app rat reports - 2023-10-08 to 2023-11-07.csv")

skimr::skim_without_charts(app_data)
```





